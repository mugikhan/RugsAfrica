!function(t){function e(e){s(e);var n=0,i=0,r=0,a='<form action="https://www.paypal.com/uk/cgi-bin/webscr" method="post">\r\n';a+='<input type="hidden" name="cmd" value="_cart" />\r\n',a+='<input type="hidden" name="upload" value="1" />\r\n',a+='<input type="hidden" name="currency_code" value="'+e.settings.currency+'" />\r\n',a+='<input type="hidden" name="business" value="'+e.settings.business+'" />\r\n',e.settings.virtual&&(a+='<input type="hidden" name="no_shipping" value="1">\r\n'),""!=e.settings.notifyURL&&(a+='<input type="hidden" name="notify_url" value="'+e.settings.notifyURL+'" />\r\n'),a+='<table class="PayPalCart">\r\n',a+='<tr><th>&nbsp;</th><th align="left">Description</th><th align="center">Qty</th><th align="right">Price</th></tr>\r\n';for(var c=0;c<e.settings.cartItems.length;c++)n+=e.settings.cartItems[c].quantity*e.settings.cartItems[c].value,i+=e.settings.cartItems[c].quantity*e.settings.cartItems[c].tax,r+=parseInt(e.settings.cartItems[c].quantity),a+='<tr>\r\n<td><a href="javascript:void(0)" onclick="$(\'#'+e.id+"').PayPalCart('remove', '"+e.settings.cartItems[c].code+"');\">x</a>\r\n",a+='<input type="hidden" name="item_number_'+(c+1).toString()+'" value="'+e.settings.cartItems[c].code+'" />\r\n',a+='<input type="hidden" name="item_name_'+(c+1).toString()+'" value="'+e.settings.cartItems[c].description+'" />\r\n',a+='<input type="hidden" name="quantity_'+(c+1).toString()+'" value="'+e.settings.cartItems[c].quantity+'" />\r\n',a+='<input type="hidden" name="amount_'+(c+1).toString()+'" value="'+e.settings.cartItems[c].value+'" />\r\n',a+='<input type="hidden" name="tax_'+(c+1).toString()+'" value="'+e.settings.cartItems[c].tax+'" />\r\n',a+="</td>\r\n",a+='<td align="left">'+e.settings.cartItems[c].description+"</td>\r\n",a+=e.settings.quantityupdate?'<td align="center"><input type="text" size="2" name="'+e.settings.cartItems[c].code+'" value="'+e.settings.cartItems[c].quantity+'" onblur="$(\'#'+e.id+"').PayPalCart('update','"+e.settings.cartItems[c].code+"', $(this).val());\" /></td>\r\n":'<td align="center">'+e.settings.cartItems[c].quantity+"</td>\r\n",a+='<td align="right">'+e.settings.currencysign+parseFloat(e.settings.cartItems[c].value).toFixed(2)+"</td></tr>\r\n";if(a+='<tr class="PayPalCartTotals"><td colspan="3" align="left">Subtotal</td><td align="right">'+e.settings.currencysign+parseFloat(n).toFixed(2)+"</td></tr>\r\n",a+='<tr class="PayPalCartTotals"><td colspan="3" align="left">Vat</td><td align="right">'+e.settings.currencysign+parseFloat(i).toFixed(2)+"</td></tr>\r\n",a+='<tr class="PayPalCartTotals"><td colspan="3" align="left">Total</td><td align="right">'+e.settings.currencysign+parseFloat(n+i).toFixed(2)+"</td></tr>\r\n",a+='<tr><td colspan="4" align="right"><input type="submit" value="Buy Now"></td></tr>\r\n',a+="</table>\r\n",a+="</form>\r\n",t(e).html(a).ready(function(){t(this).find("input").keypress(function(n){if(13==n.which){var s=t(this).attr("name"),i=t(this).val();return t(e).PayPalCart("update",s,i),!1}})}),""!=e.settings.minicartid){var o="";o+=r.toString()+" items<br />"+e.settings.currencysign+parseFloat(n).toFixed(2),t("#"+e.settings.minicartid).html(o)}}function n(t){var e=r("cart"+t.id);if(null!=e&&""!=e){var n=0;for(i=1;e>=i;i++){var s=r("cart"+t.id+i);if(null!=s&&""!=s){var a=Array();for(ARRline=s.split("##"),j=0;j<ARRline.length;j++){var c=ARRline[j].substr(0,ARRline[j].indexOf("=")).replace(/^\s+|\s+$/g,""),o=ARRline[j].substr(ARRline[j].indexOf("=")+1);a[c]=o}t.settings.cartItems.push(a),n++}}}}function s(t){for(ARRcookies=document.cookie.split(";"),e=0;e<ARRcookies.length;e++)0==ARRcookies[e].substr(0,ARRcookies[e].indexOf("=")).indexOf("cart"+t.id)&&a(ARRcookies[e].substr(0,ARRcookies[e].indexOf("=")),"",0);if(t.settings.persistdays>=0){a("cart"+t.id,t.settings.cartItems.length,t.settings.persistdays);for(var e=0;e<t.settings.cartItems.length;e++){var n="";for(var s in t.settings.cartItems[e])""!=n&&(n+="##"),n+=s+"="+t.settings.cartItems[e][s];a("cart"+t.id+(e+1).toString(),n,t.settings.persistdays)}}}function r(t){var e,n,s,i=document.cookie.split(";");for(e=0;e<i.length;e++)if(n=i[e].substr(0,i[e].indexOf("=")),s=i[e].substr(i[e].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==t)return unescape(s);return""}function a(t,e,n){if(n>0){var s=new Date;s.setDate(s.getDate()+n);var i=escape(e)+(null==n?"":"; expires="+s.toUTCString());document.cookie=t+"="+i+";path=/"}else document.cookie=t+"="+escape(e)+";path=/"}var c={init:function(s){return this.each(function(){var i={currency:"GBP",currencysign:"",business:"",virtual:!1,quantityupdate:!0,notifyurl:"",minicartid:"",persistdays:0};this.settings=t.extend(i,s,{cartItems:new Array}),this.settings.persistdays>=0&&n(this),e(this)})},add:function(t,n,s,i,r){return this.each(function(){for(var a=!1,c=this.settings.cartItems.length,o=0;c>o;o++)this.settings.cartItems[o].code==t&&(this.settings.cartItems[o].quantity=parseInt(this.settings.cartItems[o].quantity)+parseInt(s),a=!0);a||this.settings.cartItems.push({code:t,description:n,quantity:s,value:i,tax:r}),e(this)})},remove:function(t){return this.each(function(){for(var n=this.settings.cartItems.length,s=new Array,i=0;n>i;i++)this.settings.cartItems[i].code!=t&&s.push(this.settings.cartItems[i]);this.settings.cartItems=s,e(this)})},update:function(t,n){return this.each(function(){for(var s=this.settings.cartItems.length,i=0;s>i;i++)this.settings.cartItems[i].code==t&&(this.settings.cartItems[i].quantity=parseInt(n));e(this)})}};t.fn.PayPalCart=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.tooltip"):c.init.apply(this,arguments)}}(jQuery);